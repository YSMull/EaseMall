webpackJsonp([0],{146:function(t,s,e){"use strict";function a(t){o||e(273)}Object.defineProperty(s,"__esModule",{value:!0});var i=e(229),n=e(274),o=!1,r=e(4),c=a,d=r(i.a,n.a,!1,c,"data-v-2f23a2ac",null);d.options.__file="src/views/goods.vue",s.default=d.exports},195:function(t,s,e){"use strict";e(143);s.a={name:"EAmount",props:{amountp:{type:Number,default:1},cartMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{amount:this.amountp}},methods:{increase:function(){this.amount++,this.$emit("change",this.amount)},decrease:function(){this.amount<=1?this.amount=1:(this.amount--,this.$emit("change",this.amount))}},watch:{amount:function(t,s){isNaN(Number(t))?this.amount=s:Number.isInteger(Number(t))?0==Number(t)&&(this.amount=s):this.amount=s,"string"==typeof this.amount&&(this.amount=this.amount.replace(".",""),this.$emit("change",this.amount))}},mounted:function(){}}},196:function(t,s,e){"use strict";s.a={props:{picUrl:String},data:function(){return{top:0,left:0,dd:!1}},methods:{handOut:function(t){this.dd=!1},handOver:function(t){this.dd=!0},handMove:function(t){this.imgObj=this.$refs.innerImg,this.imgRect=this.imgObj.getBoundingClientRect();var s=t.x-this.imgRect.left,e=t.y-this.imgRect.top;s<100&&(this.left=0),s>300&&(this.left=200),e<100&&(this.top=0),e>300&&(this.top=200),s>=100&&s<=300&&(this.left=s-100>=0?s-100:0),e>=100&&e<=300&&(this.top=e-100>=0?e-100:0)}},mounted:function(){var t=this;this.$refs.innerImg.onload=function(){t.$emit("on-pic-loaded")},this.$refs.innerImg.onerror=function(){t.$emit("on-pic-error")}}}},209:function(t,s,e){"use strict";function a(t){o||e(210)}var i=e(195),n=e(211),o=!1,r=e(4),c=a,d=r(i.a,n.a,!1,c,"data-v-02bb1d9b",null);d.options.__file="src/common/e-amount.vue",s.a=d.exports},210:function(t,s){},211:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"e-amount"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"amount-input",attrs:{disabled:t.disabled},domProps:{value:t.amount},on:{input:function(s){s.target.composing||(t.amount=s.target.value)}}}),t._v(" "),t.disabled?t._e():e("span",{staticClass:"amount-btn"},[e("span",{staticClass:"increase",on:{click:t.increase}},[e("Icon",{staticStyle:{"margin-left":"1px"},attrs:{type:"chevron-up"}})],1),t._v(" "),e("span",{staticClass:"decrease",on:{click:t.decrease}},[e("Icon",{staticStyle:{"margin-left":"1px"},attrs:{type:"chevron-down"}})],1)])])},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},212:function(t,s,e){"use strict";function a(t){o||e(213)}var i=e(196),n=e(214),o=!1,r=e(4),c=a,d=r(i.a,n.a,!1,c,"data-v-546d2210",null);d.options.__file="src/common/e-img.vue",s.a=d.exports},213:function(t,s){},214:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"e-img-container",on:{mouseover:t.handOver,mousemove:t.handMove,mouseout:t.handOut}},[e("img",{ref:"innerImg",staticClass:"e-img",attrs:{src:t.picUrl}}),t._v(" "),e("b",{staticClass:"shadow",style:{top:t.top+"px",left:t.left+"px",display:t.dd?"block":"none"}})]),t._v(" "),e("div",{staticClass:"showDetails",style:{display:t.dd?"block":"none"}},[e("img",{staticClass:"showImgBig",style:{top:-2*t.top+"px",left:-2*t.left+"px"},attrs:{src:t.picUrl}})])])},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},229:function(t,s,e){"use strict";var a=e(209),i=e(212),n=e(8);e.n(n);s.a={components:{EAmount:a.a,EImage:i.a},data:function(){return{configs:{width:350,height:250,maskWidth:100,maskHeight:100,maskColor:"gray",maskOpacity:.2},goodsId:"",name:"",description:"",price:"",picUrl:"",detail:"",bought:!1,snapId:null}},methods:{getAmount:function(){return this.$refs.eAmount.amount},edit:function(){this.$router.push({name:"publish_edit",params:{goodsId:this.goodsId}})},add2cart:function(){var t=this;this.$isLogin()?this.$Modal.confirm({title:"确认加入购物车？",content:"",onOk:function(){t.$http.post("/addcart",{userId:t.$store.state.userId,goodsId:t.goodsId,amount:t.getAmount()}).then(function(s){t.$Message.success("已添加购物车")}).catch(function(s){t.$Message.error("添加购物车失败")})},onCancel:function(){}}):this.$confirm_login(!1)},initData:function(){this.goodsId=this.$route.params.goodsId,this.name="",this.description="",this.price="",this.picUrl="",this.detail="",this.bought=!1,this.snapId=this.$route.params.snapId},fetchData:function(){var t=this;this.initData(),"goods"===this.$route.name?this.$http.get("/goods/"+this.goodsId).then(function(s){var e=s.data.data;t.name=e.name,t.description=e.description,t.price=e.price,t.picUrl=e.picUrl,t.detail=e.detail}):"snap_goods"===this.$route.name&&this.$http.get("/snapshot/"+this.$route.params.snapId).then(function(s){var e=s.data.data;t.name=e.snapGoodsName,t.description=e.snapDescription,t.price=e.snapPrice,t.picUrl=e.snapPicUrl,t.detail=e.snapDetail,t.$refs.eAmount.amount=e.amount}),this.$store.state.isbuyer&&"snap_goods"!=this.$route.name&&this.$http.get("hasbought",{params:{goodsId:this.goodsId}}).then(function(s){null!=s.data.data&&(t.bought=!0,t.snapId=s.data.data.id)})}},watch:{$route:"fetchData"},mounted:function(){console.log("goods mounted"),this.fetchData()}}},273:function(t,s){},274:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"e-goods"},[e("Row",[e("Col",{attrs:{lg:10}},[e("EImage",{attrs:{picUrl:t.picUrl}})],1),t._v(" "),e("Col",{attrs:{lg:14}},[e("p",{staticClass:"e-name",class:{"e-snapshot":"snap_goods"===this.$route.name},domProps:{textContent:t._s(t.name)}}),t._v(" "),e("p",{staticClass:"e-description",domProps:{textContent:t._s(t.description)}}),t._v(" "),e("h1",{staticClass:"e-price",domProps:{textContent:t._s(t.price)}}),t._v(" "),this.$store.state.isbuyer&&!t.bought?e("div",{staticClass:"amount-area"},[e("p",{staticClass:"amount-label"},[t._v("数量")]),t._v(" "),e("EAmount",{ref:"eAmount",staticStyle:{"margin-right":"4px"},attrs:{disabled:"snap_goods"===this.$route.name}})],1):t._e(),t._v(" "),this.$store.state.isseller&&!this.$store.state.isbuyer||"snap_goods"==this.$route.name?t._e():e("Button",{staticClass:"add2cart",staticStyle:{float:"left"},attrs:{disabled:t.bought,type:"error"},on:{click:t.add2cart}},[t.bought?e("div",[t._v("已购买")]):e("div",[t._v("加入购物车")])]),t._v(" "),t.bought?e("router-link",{staticStyle:{"line-height":"35px","font-size":"15px"},attrs:{to:{name:"snap_goods",params:{snapId:this.snapId}}}},[t._v("查看购买记录")]):t._e(),t._v(" "),this.$store.state.isseller?e("Button",{staticClass:"add2cart",attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")]):t._e()],1)],1),t._v(" "),e("Row",[e("div",{staticClass:"e-detail"},[e("ul",{staticStyle:{"border-left":"1px solid #e8e8e8","border-bottom":"1px solid"}},[e("li",{staticClass:"e-detail-item"},[t._v("详情")])]),t._v(" "),e("div",{staticStyle:{"font-size":"20px",margin:"10px"}},[t._v("\n        "+t._s(this.detail)+"\n        ")])])])],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n}});